<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
    <meta name="keywords" content="mechanical engineer, CAD, FEA, thermal systems, engineering design, Cal Poly SLO">
    <meta name="author" content="{{ site.author.name }}">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
    <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">
    <meta property="og:site_name" content="{{ site.title }}">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
    <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#1a365d">
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="alternate icon" href="/favicon.ico">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="{{ '/assets/css/main.css' | relative_url }}" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" as="style">
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}" media="all">
    
    <!-- Critical CSS (inline for above-the-fold content) -->
    <style>
        /* Critical CSS for immediate rendering */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid #e2e8f0;
        }
        
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
    </style>
    
    <!-- Analytics -->
    {% if site.google_analytics %}
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '{{ site.google_analytics }}');
    </script>
    {% endif %}
    
    <!-- Jekyll SEO Tag -->
    {% seo %}
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="navbar__container container">
            <a href="{{ '/' | relative_url }}" class="navbar__brand">
                MC<span style="color: #3B82F6;">.</span>
            </a>
            
            <div class="navbar__nav">
                <a href="{{ '/' | relative_url }}#about" class="navbar__link">About</a>
                <a href="{{ '/' | relative_url }}#experience" class="navbar__link">Experience</a>
                <a href="{{ '/' | relative_url }}#projects" class="navbar__link">Projects</a>
                <a href="{{ '/' | relative_url }}#skills" class="navbar__link">Skills</a>
                <a href="{{ '/' | relative_url }}#contact" class="navbar__link">Contact</a>
            </div>
            
            <div class="navbar__actions">
                <button id="theme-toggle" class="btn btn--ghost" title="Toggle theme">
                    <i class="fas fa-sun" id="theme-icon"></i>
                </button>
                <a href="{{ site.author.resume_url | default: '/resume.pdf' }}" 
                   class="btn btn--primary" 
                   download>
                    <i class="fas fa-download"></i>
                    <span>Resume</span>
                </a>
            </div>
            
            <button class="navbar__toggle" id="mobile-toggle">
                <span class="navbar__toggle-line"></span>
                <span class="navbar__toggle-line"></span>
                <span class="navbar__toggle-line"></span>
            </button>
        </div>
        
        <div class="navbar__mobile-menu" id="mobile-menu">
            <a href="{{ '/' | relative_url }}#about" class="navbar__link">About</a>
            <a href="{{ '/' | relative_url }}#experience" class="navbar__link">Experience</a>
            <a href="{{ '/' | relative_url }}#projects" class="navbar__link">Projects</a>
            <a href="{{ '/' | relative_url }}#skills" class="navbar__link">Skills</a>
            <a href="{{ '/' | relative_url }}#contact" class="navbar__link">Contact</a>
            <div class="navbar__mobile-actions">
                <button id="mobile-theme-toggle" class="btn btn--ghost" title="Toggle theme">
                    <i class="fas fa-sun" id="mobile-theme-icon"></i>
                </button>
                <a href="{{ site.author.resume_url | default: '/resume.pdf' }}" 
                   class="btn btn--primary" 
                   download>
                    <i class="fas fa-download"></i>
                    Resume
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        {{ content }}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer__container container">
            <div class="footer__brand">Mois Cohen<span style="color: #3B82F6;">.</span></div>
            
            <nav class="footer__nav">
                <a href="{{ '/' | relative_url }}#about" class="footer__link">About</a>
                <a href="{{ '/' | relative_url }}#experience" class="footer__link">Experience</a>
                <a href="{{ '/' | relative_url }}#projects" class="footer__link">Projects</a>
                <a href="{{ '/' | relative_url }}#skills" class="footer__link">Skills</a>
                <a href="{{ '/' | relative_url }}#contact" class="footer__link">Contact</a>
            </nav>
            
            {% if site.social %}
            <div class="footer__social">
                {% for link in site.social.links %}
                    {% if link contains 'linkedin' %}
                        <a href="{{ link }}" class="footer__social-link" target="_blank" rel="noopener">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                    {% elsif link contains 'github' %}
                        <a href="{{ link }}" class="footer__social-link" target="_blank" rel="noopener">
                            <i class="fab fa-github"></i>
                        </a>
                    {% elsif link contains 'twitter' %}
                        <a href="{{ link }}" class="footer__social-link" target="_blank" rel="noopener">
                            <i class="fab fa-twitter"></i>
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}
            
            <div class="footer__copyright">
                <p>&copy; {{ 'now' | date: '%Y' }} {{ site.author.name }}. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" defer></script>
    <script src="{{ '/assets/js/main.js' | relative_url }}" defer></script>
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "{{ site.author.name }}",
      "url": "{{ site.url }}",
      "email": "{{ site.author.email }}",
      "telephone": "{{ site.author.phone }}",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "{{ site.author.location | split: ', ' | first }}",
        "addressRegion": "{{ site.author.location | split: ', ' | last }}"
      },
      "jobTitle": "{{ site.profession }}",
      "alumniOf": {
        "@type": "CollegeOrUniversity",
        "name": "California Polytechnic State University, San Luis Obispo"
      },
      "knowsAbout": [
        {% for skill in site.specializations %}
        "{{ skill }}"{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ],
      "sameAs": [
        {% for link in site.social.links %}
        "{{ link }}"{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    }
    </script>
</body>
</html>